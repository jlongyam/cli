import t from"assert";import e from"events";import i from"readline";function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var r;var n;function a(){if(n)return r;n=1;const t=/([^=\s]+)=?\s*(.*)/;function e(e){e=e.slice(2);const i={};let s,r;e.forEach(function(e){e=e.match(t);e.splice(0,1);s=e[0];if(s.indexOf("-")===0){s=s.slice(s.slice(0,2).lastIndexOf("-")+1)}r=e[1]!==""?parseFloat(e[1]).toString()===e[1]?+e[1]:e[1]:true;i[s]=r});return i}r=e;return r}var l=a();var o=s(l);var h=Object.freeze({__proto__:null,default:o});const{default:u}=await Promise.resolve().then(function(){return h});const c=u(process.argv);var f={};var d={exports:{}};var p={exports:{}};var m;function g(){if(m)return p.exports;m=1;(function(t){const e=typeof process!=="undefined"&&process.env.TERM_PROGRAM==="Hyper";const i=typeof process!=="undefined"&&process.platform==="win32";const s=typeof process!=="undefined"&&process.platform==="linux";const r={ballotDisabled:"â˜’",ballotOff:"â˜",ballotOn:"â˜‘",bullet:"â€¢",bulletWhite:"â—¦",fullBlock:"â–ˆ",heart:"â¤",identicalTo:"â‰¡",line:"â”€",mark:"â€»",middot:"Â·",minus:"ï¼",multiplication:"Ã—",obelus:"Ã·",pencilDownRight:"âœŽ",pencilRight:"âœ",pencilUpRight:"âœ",percent:"%",pilcrow2:"â¡",pilcrow:"Â¶",plusMinus:"Â±",question:"?",section:"Â§",starsOff:"â˜†",starsOn:"â˜…",upDownArrow:"â†•"};const n=Object.assign({},r,{check:"âˆš",cross:"Ã—",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"Â»",radioOff:"( )",radioOn:"(*)",warning:"â€¼"});const a=Object.assign({},r,{ballotCross:"âœ˜",check:"âœ”",cross:"âœ–",ellipsisLarge:"â‹¯",ellipsis:"â€¦",info:"â„¹",questionFull:"ï¼Ÿ",questionSmall:"ï¹–",pointer:s?"â–¸":"â¯",pointerSmall:s?"â€£":"â€º",radioOff:"â—¯",radioOn:"â—‰",warning:"âš "});t.exports=i&&!e?n:a;Reflect.defineProperty(t.exports,"common",{enumerable:false,value:r});Reflect.defineProperty(t.exports,"windows",{enumerable:false,value:n});Reflect.defineProperty(t.exports,"other",{enumerable:false,value:a})})(p);return p.exports}var y;function b(){if(y)return d.exports;y=1;const t=t=>t!==null&&typeof t==="object"&&!Array.isArray(t);const e=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g;const i=()=>{if(typeof process!=="undefined"){return process.env.FORCE_COLOR!=="0"}return false};const s=()=>{const s={enabled:i(),visible:true,styles:{},keys:{}};const r=t=>{let e=t.open=`[${t.codes[0]}m`;let i=t.close=`[${t.codes[1]}m`;let s=t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g");t.wrap=(t,r)=>{if(t.includes(i))t=t.replace(s,i+e);let n=e+t+i;return r?n.replace(/\r*\n/g,`${i}$&${e}`):n};return t};const n=(t,e,i)=>typeof t==="function"?t(e):t.wrap(e,i);const a=(t,e)=>{if(t===""||t==null)return"";if(s.enabled===false)return t;if(s.visible===false)return"";let i=""+t;let r=i.includes("\n");let a=e.length;if(a>0&&e.includes("unstyle")){e=[...new Set(["unstyle",...e])].reverse()}while(a-- >0)i=n(s.styles[e[a]],i,r);return i};const l=(t,e,i)=>{s.styles[t]=r({name:t,codes:e});let n=s.keys[i]||(s.keys[i]=[]);n.push(t);Reflect.defineProperty(s,t,{configurable:true,enumerable:true,set(e){s.alias(t,e)},get(){let e=t=>a(t,e.stack);Reflect.setPrototypeOf(e,s);e.stack=this.stack?this.stack.concat(t):[t];return e}})};l("reset",[0,0],"modifier");l("bold",[1,22],"modifier");l("dim",[2,22],"modifier");l("italic",[3,23],"modifier");l("underline",[4,24],"modifier");l("inverse",[7,27],"modifier");l("hidden",[8,28],"modifier");l("strikethrough",[9,29],"modifier");l("black",[30,39],"color");l("red",[31,39],"color");l("green",[32,39],"color");l("yellow",[33,39],"color");l("blue",[34,39],"color");l("magenta",[35,39],"color");l("cyan",[36,39],"color");l("white",[37,39],"color");l("gray",[90,39],"color");l("grey",[90,39],"color");l("bgBlack",[40,49],"bg");l("bgRed",[41,49],"bg");l("bgGreen",[42,49],"bg");l("bgYellow",[43,49],"bg");l("bgBlue",[44,49],"bg");l("bgMagenta",[45,49],"bg");l("bgCyan",[46,49],"bg");l("bgWhite",[47,49],"bg");l("blackBright",[90,39],"bright");l("redBright",[91,39],"bright");l("greenBright",[92,39],"bright");l("yellowBright",[93,39],"bright");l("blueBright",[94,39],"bright");l("magentaBright",[95,39],"bright");l("cyanBright",[96,39],"bright");l("whiteBright",[97,39],"bright");l("bgBlackBright",[100,49],"bgBright");l("bgRedBright",[101,49],"bgBright");l("bgGreenBright",[102,49],"bgBright");l("bgYellowBright",[103,49],"bgBright");l("bgBlueBright",[104,49],"bgBright");l("bgMagentaBright",[105,49],"bgBright");l("bgCyanBright",[106,49],"bgBright");l("bgWhiteBright",[107,49],"bgBright");s.ansiRegex=e;s.hasColor=s.hasAnsi=t=>{s.ansiRegex.lastIndex=0;return typeof t==="string"&&t!==""&&s.ansiRegex.test(t)};s.alias=(t,e)=>{let i=typeof e==="string"?s[e]:e;if(typeof i!=="function"){throw new TypeError("Expected alias to be the name of an existing color (string) or a function")}if(!i.stack){Reflect.defineProperty(i,"name",{value:t});s.styles[t]=i;i.stack=[t]}Reflect.defineProperty(s,t,{configurable:true,enumerable:true,set(e){s.alias(t,e)},get(){let t=e=>a(e,t.stack);Reflect.setPrototypeOf(t,s);t.stack=this.stack?this.stack.concat(i.stack):i.stack;return t}})};s.theme=e=>{if(!t(e))throw new TypeError("Expected theme to be an object");for(let t of Object.keys(e)){s.alias(t,e[t])}return s};s.alias("unstyle",t=>{if(typeof t==="string"&&t!==""){s.ansiRegex.lastIndex=0;return t.replace(s.ansiRegex,"")}return""});s.alias("noop",t=>t);s.none=s.clear=s.noop;s.stripColor=s.unstyle;s.symbols=g();s.define=l;return s};d.exports=s();d.exports.create=s;return d.exports}var w;function v(){if(w)return f;w=1;(function(t){const e=Object.prototype.toString;const i=b();let s=false;let r=new Set;const n={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};t.longest=(t,e)=>t.reduce((t,i)=>Math.max(t,e?i[e].length:i.length),0);t.hasColor=t=>!!t&&i.hasColor(t);const a=t.isObject=t=>t!==null&&typeof t==="object"&&!Array.isArray(t);t.nativeType=t=>e.call(t).slice(8,-1).toLowerCase().replace(/\s/g,"");t.isAsyncFn=e=>t.nativeType(e)==="asyncfunction";t.isPrimitive=t=>t!=null&&typeof t!=="object"&&typeof t!=="function";t.resolve=(t,e,...i)=>{if(typeof e==="function"){return e.call(t,...i)}return e};t.scrollDown=(t=[])=>[...t.slice(1),t[0]];t.scrollUp=(t=[])=>[t.pop(),...t];t.reorder=(t=[])=>{let e=t.slice();e.sort((t,e)=>{if(t.index>e.index)return 1;if(t.index<e.index)return-1;return 0});return e};t.swap=(t,e,i)=>{let s=t.length;let r=i===s?0:i<0?s-1:i;let n=t[e];t[e]=t[r];t[r]=n};t.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;if(t&&typeof t.getWindowSize==="function"){i=t.getWindowSize()[0]}if(process.platform==="win32"){return i-1}return i};t.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;if(t&&typeof t.getWindowSize==="function"){i=t.getWindowSize()[1]}return i};t.wordWrap=(t,e={})=>{if(!t)return t;if(typeof e==="number"){e={width:e}}let{indent:i="",newline:s="\n"+i,width:r=80}=e;let n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let a=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`;let l=t.trim();let o=new RegExp(a,"g");let h=l.match(o)||[];h=h.map(t=>t.replace(/\n$/,""));if(e.padEnd)h=h.map(t=>t.padEnd(r," "));if(e.padStart)h=h.map(t=>t.padStart(r," "));return i+h.join(s)};t.unmute=t=>{let e=t.stack.find(t=>i.keys.color.includes(t));if(e){return i[e]}let s=t.stack.find(t=>t.slice(2)==="bg");if(s){return i[e.slice(2)]}return t=>t};t.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"";t.inverse=e=>{if(!e||!e.stack)return e;let s=e.stack.find(t=>i.keys.color.includes(t));if(s){let r=i["bg"+t.pascal(s)];return r?r.black:e}let r=e.stack.find(t=>t.slice(0,2)==="bg");if(r){return i[r.slice(2).toLowerCase()]||e}return i.none};t.complement=e=>{if(!e||!e.stack)return e;let s=e.stack.find(t=>i.keys.color.includes(t));let r=e.stack.find(t=>t.slice(0,2)==="bg");if(s&&!r){return i[n[s]||s]}if(r){let s=r.slice(2).toLowerCase();let a=n[s];if(!a)return e;return i["bg"+t.pascal(a)]||e}return i.none};t.meridiem=t=>{let e=t.getHours();let i=t.getMinutes();let s=e>=12?"pm":"am";e=e%12;let r=e===0?12:e;let n=i<10?"0"+i:i;return r+":"+n+" "+s};t.set=(e={},i="",s)=>i.split(".").reduce((e,i,r,n)=>{let a=n.length-1>r?e[i]||{}:s;if(!t.isObject(a)&&r<n.length-1)a={};return e[i]=a},e);t.get=(t={},e="",i)=>{let s=t[e]==null?e.split(".").reduce((t,e)=>t&&t[e],t):t[e];return s==null?i:s};t.mixin=(e,i)=>{if(!a(e))return i;if(!a(i))return e;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(hasOwnProperty.call(r,"value")){if(hasOwnProperty.call(e,s)&&a(r.value)){let n=Object.getOwnPropertyDescriptor(e,s);if(a(n.value)&&n.value!==r.value){e[s]=t.merge({},e[s],i[s])}else{Reflect.defineProperty(e,s,r)}}else{Reflect.defineProperty(e,s,r)}}else{Reflect.defineProperty(e,s,r)}}return e};t.merge=(...e)=>{let i={};for(let s of e)t.mixin(i,s);return i};t.mixinEmitter=(e,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];if(typeof n==="function"){t.define(e,r,n.bind(i))}else{t.define(e,r,n)}}};const l=(t,e)=>{if(s)return;s=true;r.forEach(t=>t());if(t===true){process.exit(128+e)}};const o=l.bind(null,true,15);const h=l.bind(null,true,2);t.onExit=t=>{if(r.size===0){process.once("SIGTERM",o);process.once("SIGINT",h);process.once("exit",l)}r.add(t);return()=>{r.delete(t);if(r.size===0){process.off("SIGTERM",o);process.off("SIGINT",h);process.off("exit",l)}}};t.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})};t.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:true,configurable:true,set(t){s=t},get(){return s?s():i()}})}})(f);return f}var x;var k;function C(){if(k)return x;k=1;x=({onlyFirst:t=false}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?undefined:"g")};return x}var S;var $;function j(){if($)return S;$=1;const t=C();S=e=>typeof e==="string"?e.replace(t(),""):e;return S}var _={};var P;function O(){if(P)return _;P=1;_.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"};_.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"};_.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"};_.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"};_.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"};return _}var E;var B;function R(){if(B)return E;B=1;E=class t{_queue=[];_executing=false;_jobRunner=null;constructor(t){this._jobRunner=t}enqueue=(...t)=>{this._queue.push(t);this._dequeue()};destroy(){this._queue.length=0;this._jobRunner=null}_dequeue(){if(this._executing||!this._queue.length)return;this._executing=true;this._jobRunner(...this._queue.shift());setTimeout(()=>{this._executing=false;this._dequeue()})}};return E}var A;var D;function I(){if(D)return A;D=1;const t=i;const e=O();const s=R();const r=/^(?:\x1b)([a-zA-Z0-9])$/;const n=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/;const a={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};function l(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}function o(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}const h=(t="",e={})=>{let i;let s={name:e.name,ctrl:false,meta:false,shift:false,option:false,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)){if(t[0]>127&&t[1]===void 0){t[0]-=128;t=""+String(t)}else{t=String(t)}}else if(t!==void 0&&typeof t!=="string"){t=String(t)}else if(!t){t=s.sequence||""}s.sequence=s.sequence||t||s.name;if(t==="\r"){s.raw=void 0;s.name="return"}else if(t==="\n"){s.name="enter"}else if(t==="\t"){s.name="tab"}else if(t==="\b"||t===""||t===""||t==="\b"){s.name="backspace";s.meta=t.charAt(0)===""}else if(t===""||t===""){s.name="escape";s.meta=t.length===2}else if(t===" "||t===" "){s.name="space";s.meta=t.length===2}else if(t<=""){s.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1);s.ctrl=true}else if(t.length===1&&t>="0"&&t<="9"){s.name="number"}else if(t.length===1&&t>="a"&&t<="z"){s.name=t}else if(t.length===1&&t>="A"&&t<="Z"){s.name=t.toLowerCase();s.shift=true}else if(i=r.exec(t)){s.meta=true;s.shift=/^[A-Z]$/.test(i[1])}else if(i=n.exec(t)){let e=[...t];if(e[0]===""&&e[1]===""){s.option=true}let r=[i[1],i[2],i[4],i[6]].filter(Boolean).join("");let n=(i[3]||i[5]||1)-1;s.ctrl=!!(n&4);s.meta=!!(n&10);s.shift=!!(n&1);s.code=r;s.name=a[r];s.shift=l(r)||s.shift;s.ctrl=o(r)||s.ctrl}return s};h.listen=(e={},i)=>{let{stdin:r}=e;if(!r||r!==process.stdin&&!r.isTTY){throw new Error("Invalid stream passed")}let n=t.createInterface({terminal:true,input:r});t.emitKeypressEvents(r,n);const a=new s((t,e)=>i(t,h(t,e),n));let l=r.isRaw;if(r.isTTY)r.setRawMode(true);r.on("keypress",a.enqueue);n.resume();let o=()=>{if(r.isTTY)r.setRawMode(l);r.removeListener("keypress",a.enqueue);a.destroy();n.pause();n.close()};return o};h.action=(t,i,s)=>{let r={...e,...s};if(i.ctrl){i.action=r.ctrl[i.name];return i}if(i.option&&r.option){i.action=r.option[i.name];return i}if(i.shift){i.action=r.shift[i.name];return i}i.action=r.keys[i.name];return i};A=h;return A}var z;var M;function L(){if(M)return z;M=1;z=e=>{e.timers=e.timers||{};let i=e.options.timers;if(!i)return;for(let s of Object.keys(i)){let r=i[s];if(typeof r==="number"){r={interval:r}}t(e,s,r)}};function t(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0};let r=i.interval||120;s.frames=i.frames||[];s.loading=true;let n=setInterval(()=>{s.ms=Date.now()-s.start;s.tick++;t.render()},r);s.stop=()=>{s.loading=false;clearInterval(n)};Reflect.defineProperty(s,"interval",{value:n});t.once("close",()=>s.stop());return s.stop}return z}var T;var q;function N(){if(q)return T;q=1;const{define:t,width:e}=v();class i{constructor(i){let s=i.options;t(this,"_prompt",i);this.type=i.type;this.name=i.name;this.message="";this.header="";this.footer="";this.error="";this.hint="";this.input="";this.cursor=0;this.index=0;this.lines=0;this.tick=0;this.prompt="";this.buffer="";this.width=e(s.stdout||process.stdout);Object.assign(this,s);this.name=this.name||this.message;this.message=this.message||this.name;this.symbols=i.symbols;this.styles=i.styles;this.required=new Set;this.cancelled=false;this.submitted=false}clone(){let t={...this};t.status=this.status;t.buffer=Buffer.from(t.buffer);delete t.clone;return t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return typeof e==="function"?e:t.pending}set loading(t){this._loading=t}get loading(){if(typeof this._loading==="boolean")return this._loading;if(this.loadingChoices)return"choices";return false}get status(){if(this.cancelled)return"cancelled";if(this.submitted)return"submitted";return"pending"}}T=i;return T}var F;var H;function V(){if(H)return F;H=1;const t=v();const e=b();const i={default:e.noop,noop:e.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||t.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||t.complement(this.primary)},primary:e.cyan,success:e.green,danger:e.magenta,strong:e.bold,warning:e.yellow,muted:e.dim,disabled:e.gray,dark:e.dim.gray,underline:e.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse}};i.merge=(s={})=>{if(s.styles&&typeof s.styles.enabled==="boolean"){e.enabled=s.styles.enabled}if(s.styles&&typeof s.styles.visible==="boolean"){e.visible=s.styles.visible}let r=t.merge({},i,s.styles);delete r.merge;for(let t of Object.keys(e)){if(!hasOwnProperty.call(r,t)){Reflect.defineProperty(r,t,{get:()=>e[t]})}}for(let t of Object.keys(e.styles)){if(!hasOwnProperty.call(r,t)){Reflect.defineProperty(r,t,{get:()=>e[t]})}}return r};F=i;return F}var U;var W;function G(){if(W)return U;W=1;const t=process.platform==="win32";const e=b();const i=v();const s={...e.symbols,upDownDoubleArrow:"â‡•",upDownDoubleArrow2:"â¬",upDownArrow:"â†•",asterisk:"*",asterism:"â‚",bulletWhite:"â—¦",electricArrow:"âŒ",ellipsisLarge:"â‹¯",ellipsisSmall:"â€¦",fullBlock:"â–ˆ",identicalTo:"â‰¡",indicator:e.symbols.check,leftAngle:"â€¹",mark:"â€»",minus:"âˆ’",multiplication:"Ã—",obelus:"Ã·",percent:"%",pilcrow:"Â¶",pilcrow2:"â¡",pencilUpRight:"âœ",pencilDownRight:"âœŽ",pencilRight:"âœ",plus:"+",plusMinus:"Â±",pointRight:"â˜ž",rightAngle:"â€º",section:"Â§",hexagon:{off:"â¬¡",on:"â¬¢",disabled:"â¬¢"},ballot:{on:"â˜‘",off:"â˜",disabled:"â˜’"},stars:{on:"â˜…",off:"â˜†",disabled:"â˜†"},folder:{on:"â–¼",off:"â–¶",disabled:"â–¶"},prefix:{pending:e.symbols.question,submitted:e.symbols.check,cancelled:e.symbols.cross},separator:{pending:e.symbols.pointerSmall,submitted:e.symbols.middot,cancelled:e.symbols.middot},radio:{off:t?"( )":"â—¯",on:t?"(*)":"â—‰",disabled:t?"(|)":"â’¾"},numbers:["â“ª","â‘ ","â‘¡","â‘¢","â‘£","â‘¤","â‘¥","â‘¦","â‘§","â‘¨","â‘©","â‘ª","â‘«","â‘¬","â‘­","â‘®","â‘¯","â‘°","â‘±","â‘²","â‘³","ã‰‘","ã‰’","ã‰“","ã‰”","ã‰•","ã‰–","ã‰—","ã‰˜","ã‰™","ã‰š","ã‰›","ã‰œ","ã‰","ã‰ž","ã‰Ÿ","ãŠ±","ãŠ²","ãŠ³","ãŠ´","ãŠµ","ãŠ¶","ãŠ·","ãŠ¸","ãŠ¹","ãŠº","ãŠ»","ãŠ¼","ãŠ½","ãŠ¾","ãŠ¿"]};s.merge=t=>{let r=i.merge({},e.symbols,s,t.symbols);delete r.merge;return r};U=s;return U}var K;var Z;function Y(){if(Z)return K;Z=1;const t=V();const e=G();const i=v();K=s=>{s.options=i.merge({},s.options.theme,s.options);s.symbols=e.merge(s.options);s.styles=t.merge(s.options)};return K}var J={exports:{}};var Q;function X(){if(Q)return J.exports;Q=1;(function(t,e){const i=process.env.TERM_PROGRAM==="Apple_Terminal";const s=j();const r=v();const n=t.exports=e;const a="[";const l="";let o=false;const h=n.code={bell:l,beep:l,beginning:`${a}G`,down:`${a}J`,esc:a,getPosition:`${a}6n`,hide:`${a}?25l`,line:`${a}2K`,lineEnd:`${a}K`,lineStart:`${a}1K`,restorePosition:a+(i?"8":"u"),savePosition:a+(i?"7":"s"),screen:`${a}2J`,show:`${a}?25h`,up:`${a}1J`};const u=n.cursor={get hidden(){return o},hide(){o=true;return h.hide},show(){o=false;return h.show},forward:(t=1)=>`${a}${t}C`,backward:(t=1)=>`${a}${t}D`,nextLine:(t=1)=>`${a}E`.repeat(t),prevLine:(t=1)=>`${a}F`.repeat(t),up:(t=1)=>t?`${a}${t}A`:"",down:(t=1)=>t?`${a}${t}B`:"",right:(t=1)=>t?`${a}${t}C`:"",left:(t=1)=>t?`${a}${t}D`:"",to(t,e){return e?`${a}${e+1};${t+1}H`:`${a}${t+1}G`},move(t=0,e=0){let i="";i+=t<0?u.left(-t):t>0?u.right(t):"";i+=e<0?u.up(-e):e>0?u.down(e):"";return i},strLen(t){var e=0,i=t.length,s=-1;for(var r=0;r<i;r++){s=t.charCodeAt(r);if(s>=0&&s<=128)e+=1;else e+=2}return e},restore(t={}){let{after:e,cursor:i,initial:s,input:a,prompt:l,size:o,value:h}=t;s=r.isPrimitive(s)?String(s):"";a=r.isPrimitive(a)?String(a):"";h=r.isPrimitive(h)?String(h):"";if(o){let t=n.cursor.up(o)+n.cursor.to(this.strLen(l));let e=a.length-i;if(e>0){t+=n.cursor.left(e)}return t}if(h||e){let t=!a&&!!s?-this.strLen(s):-this.strLen(a)+i;if(e)t-=this.strLen(e);if(a===""&&s&&!l.includes(s)){t+=this.strLen(s)}return n.cursor.move(t)}}};const c=n.erase={screen:h.screen,up:h.up,down:h.down,line:h.line,lineEnd:h.lineEnd,lineStart:h.lineStart,lines(t){let e="";for(let i=0;i<t;i++){e+=n.erase.line+(i<t-1?n.cursor.up(1):"")}if(t)e+=n.code.beginning;return e}};n.clear=(t="",e=process.stdout.columns)=>{if(!e)return c.line+u.to(0);let i=t=>[...s(t)].length;let r=t.split(/\r?\n/);let n=0;for(let t of r){n+=1+Math.floor(Math.max(i(t)-1,0)/e)}return(c.line+u.prevLine()).repeat(n-1)+c.line+u.to(0)}})(J,J.exports);return J.exports}var tt;var et;function it(){if(et)return tt;et=1;const t=e;const i=j();const s=I();const r=L();const n=N();const a=Y();const l=v();const o=X();class h extends t{constructor(t={}){super();this.name=t.name;this.type=t.type;this.options=t;a(this);r(this);this.state=new n(this);this.initial=[t.initial,t.default].find(t=>t!=null);this.stdout=t.stdout||process.stdout;this.stdin=t.stdin||process.stdin;this.scale=t.scale||1;this.term=this.options.term||process.env.TERM_PROGRAM;this.margin=c(this.options.margin);this.setMaxListeners(0);u(this)}async keypress(t,e={}){this.keypressed=true;let i=s.action(t,s(t,e),this.options.actions);this.state.keypress=i;this.emit("keypress",t,i);this.emit("state",this.state.clone());const r=this.options[i.action]||this[i.action]||this.dispatch;if(typeof r==="function"){return await r.call(this,t,i)}this.alert()}alert(){delete this.state.alert;if(this.options.show===false){this.emit("alert")}else{this.stdout.write(o.code.beep)}}cursorHide(){this.stdout.write(o.cursor.hide());const t=l.onExit(()=>this.cursorShow());this.on("close",()=>{this.cursorShow();t()})}cursorShow(){this.stdout.write(o.cursor.show())}write(t){if(!t)return;if(this.stdout&&this.state.show!==false){this.stdout.write(t)}this.state.buffer+=t}clear(t=0){let e=this.state.buffer;this.state.buffer="";if(!e&&!t||this.options.show===false)return;this.stdout.write(o.cursor.down(t)+o.clear(e,this.width))}restore(){if(this.state.closed||this.options.show===false)return;let{prompt:t,after:e,rest:i}=this.sections();let{cursor:s,initial:r="",input:n="",value:a=""}=this;let l=this.state.size=i.length;let h={after:e,cursor:s,initial:r,input:n,prompt:t,size:l,value:a};let u=o.cursor.restore(h);if(u){this.stdout.write(u)}}sections(){let{buffer:t,input:e,prompt:s}=this.state;s=i(s);let r=i(t);let n=r.indexOf(s);let a=r.slice(0,n);let l=r.slice(n);let o=l.split("\n");let h=o[0];let u=o[o.length-1];let c=s+(e?" "+e:"");let f=c.length;let d=f<h.length?h.slice(f+1):"";return{header:a,prompt:h,after:d,rest:o.slice(1),last:u}}async submit(){this.state.submitted=true;this.state.validating=true;if(this.options.onSubmit){await this.options.onSubmit.call(this,this.name,this.value,this)}let t=this.state.error||await this.validate(this.value,this.state);if(t!==true){let e="\n"+this.symbols.pointer+" ";if(typeof t==="string"){e+=t.trim()}else{e+="Invalid input"}this.state.error="\n"+this.styles.danger(e);this.state.submitted=false;await this.render();await this.alert();this.state.validating=false;this.state.error=void 0;return}this.state.validating=false;await this.render();await this.close();this.value=await this.result(this.value);this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=true;await this.render();await this.close();if(typeof this.options.onCancel==="function"){await this.options.onCancel.call(this,this.name,this.value,this)}this.emit("cancel",await this.error(t))}async close(){this.state.closed=true;try{let t=this.sections();let e=Math.ceil(t.prompt.length/this.width);if(t.rest){this.write(o.cursor.down(t.rest.length))}this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){if(!this.stop&&this.options.show!==false){this.stop=s.listen(this,this.keypress.bind(this));this.once("close",this.stop);this.emit("start",this)}}async skip(){this.skipped=this.options.skip===true;if(typeof this.options.skip==="function"){this.skipped=await this.options.skip.call(this,this.name,this.value)}return this.skipped}async initialize(){let{format:t,options:e,result:i}=this;this.format=()=>t.call(this,this.value);this.result=()=>i.call(this,this.value);if(typeof e.initial==="function"){this.initial=await e.initial.call(this,this)}if(typeof e.onRun==="function"){await e.onRun.call(this,this)}if(typeof e.onSubmit==="function"){let t=e.onSubmit.bind(this);let i=this.submit.bind(this);delete this.options.onSubmit;this.submit=async()=>{await t(this.name,this.value,this);return i()}}await this.start();await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(t,e)=>{this.once("submit",t);this.once("cancel",e);if(await this.skip()){this.render=()=>{};return this.submit()}await this.initialize();this.emit("run")})}async element(t,e,i){let{options:s,state:r,symbols:n,timers:a}=this;let l=a&&a[t];r.timer=l;let o=s[t]||r[t]||n[t];let h=e&&e[t]!=null?e[t]:await o;if(h==="")return h;let u=await this.resolve(h,r,e,i);if(!u&&e&&e[t]){return this.resolve(o,r,e,i)}return u}async prefix(){let t=await this.element("prefix")||this.symbols;let e=this.timers&&this.timers.prefix;let i=this.state;i.timer=e;if(l.isObject(t))t=t[i.status]||t.pending;if(!l.hasColor(t)){let e=this.styles[i.status]||this.styles.pending;return e(t)}return t}async message(){let t=await this.element("message");if(!l.hasColor(t)){return this.styles.strong(t)}return t}async separator(){let t=await this.element("separator")||this.symbols;let e=this.timers&&this.timers.separator;let i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator;let r=await this.resolve(s,i);if(l.isObject(r))r=r[i.status]||r.pending;if(!l.hasColor(r)){return this.styles.muted(r)}return r}async pointer(t,e){let i=await this.element("pointer",t,e);if(typeof i==="string"&&l.hasColor(i)){return i}if(i){let t=this.styles;let s=this.index===e;let r=s?t.primary:t=>t;let n=await this.resolve(i[s?"on":"off"]||i,this.state);let a=!l.hasColor(n)?r(n):n;return s?a:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if(typeof i==="string"&&l.hasColor(i)){return i}if(i){let e=this.styles;let s=t.enabled===true;let r=s?e.success:e.dark;let n=i[s?"on":"off"]||i;return!l.hasColor(n)?r(n):n}return""}body(){return null}footer(){if(this.state.status==="pending"){return this.element("footer")}}header(){if(this.state.status==="pending"){return this.element("header")}}async hint(){if(this.state.status==="pending"&&!this.isValue(this.state.input)){let t=await this.element("hint");if(!l.hasColor(t)){return this.styles.muted(t)}return t}}error(t){return!this.state.submitted?t||this.state.error:""}format(t){return t}result(t){return t}validate(t){if(this.options.required===true){return this.isValue(t)}return true}isValue(t){return t!=null&&t!==""}resolve(t,...e){return l.resolve(this,t,...e)}get base(){return h.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||l.height(this.stdout,25)}get width(){return this.options.columns||l.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state;let i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}function u(t){let e=e=>t[e]===void 0||typeof t[e]==="function";let i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"];let s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];if(typeof n==="function"&&e(r)){if(!s.includes(r)){t[r]=n.bind(t)}}else if(typeof t[r]!=="function"){t[r]=n}}}function c(t){if(typeof t==="number"){t=[t,t,t,t]}let e=[].concat(t||[]);let i=t=>t%2===0?"\n":" ";let s=[];for(let t=0;t<4;t++){let r=i(t);if(e[t]){s.push(r.repeat(e[t]))}else{s.push("")}}return s}tt=h;return tt}var st={};var rt;var nt;function at(){if(nt)return rt;nt=1;const t=v();const e={default(t,e){return e},checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading(t,e){e.disabled="";e.indicator=[e.indicator," "].find(t=>t!=null);e.message=e.message||"";return e},input(t,e){throw new Error("input role is not implemented yet")},option(t,i){return e.default(t,i)},radio(t,e){throw new Error("radio role is not implemented yet")},separator(t,e){e.disabled="";e.indicator=[e.indicator," "].find(t=>t!=null);e.message=e.message||t.symbols.line.repeat(5);return e},spacer(t,e){return e}};rt=(i,s={})=>{let r=t.merge({},e,s.roles);return r[i]||r.default};return rt}var lt;var ot;function ht(){if(ot)return lt;ot=1;const t=j();const e=it();const i=at();const s=v();const{reorder:r,scrollUp:n,scrollDown:a,isObject:l,swap:o}=s;class h extends e{constructor(t){super(t);this.cursorHide();this.maxSelected=t.maxSelected||Infinity;this.multiple=t.multiple||false;this.initial=t.initial||0;this.delay=t.delay||0;this.longest=0;this.num=""}async initialize(){if(typeof this.options.initial==="function"){this.initial=await this.options.initial.call(this)}await this.reset(true);await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;this.state._choices=[];this.state.choices=[];this.choices=await Promise.all(await this.toChoices(t));this.choices.forEach(t=>t.enabled=false);if(typeof s!=="function"&&this.selectable.length===0){throw new Error("At least one choice must be selectable")}if(l(e))e=Object.keys(e);if(Array.isArray(e)){if(i!=null)this.index=this.findIndex(i);e.forEach(t=>this.enable(this.find(t)));await this.render()}else{if(i!=null)e=i;if(typeof e==="string")e=this.findIndex(e);if(typeof e==="number"&&e>-1){this.index=Math.max(0,Math.min(e,this.choices.length));this.enable(this.find(this.index))}}if(this.isDisabled(this.focused)){await this.down()}}async toChoices(t,e){this.state.loadingChoices=true;let i=[];let s=0;let r=async(t,e)=>{if(typeof t==="function")t=await t.call(this);if(t instanceof Promise)t=await t;for(let n=0;n<t.length;n++){let a=t[n]=await this.toChoice(t[n],s++,e);i.push(a);if(a.choices){await r(a.choices,a)}}return i};return r(t,e).then(t=>{this.state.loadingChoices=false;return t})}async toChoice(e,r,n){if(typeof e==="function")e=await e.call(this,this);if(e instanceof Promise)e=await e;if(typeof e==="string")e={name:e};if(e.normalized)return e;e.normalized=true;let a=e.value;let l=i(e.role,this.options);e=l(this,e);if(typeof e.disabled==="string"&&!e.hint){e.hint=e.disabled;e.disabled=true}if(e.disabled===true&&e.hint==null){e.hint="(disabled)"}if(e.index!=null)return e;e.name=e.name||e.key||e.title||e.value||e.message;e.message=e.message||e.name||"";e.value=[e.value,e.name].find(this.isValue.bind(this));e.input="";e.index=r;e.cursor=0;s.define(e,"parent",n);e.level=n?n.level+1:1;if(e.indent==null){e.indent=n?n.indent+"  ":e.indent||""}e.path=n?n.path+"."+e.name:e.name;e.enabled=!!(this.multiple&&!this.isDisabled(e)&&(e.enabled||this.isSelected(e)));if(!this.isDisabled(e)){this.longest=Math.max(this.longest,t(e.message).length)}let o={...e};e.reset=(t=o.input,i=o.value)=>{for(let t of Object.keys(o))e[t]=o[t];e.input=t;e.value=i};if(a==null&&typeof e.initial==="function"){e.input=await e.initial.call(this,this.state,e,r)}return e}async onChoice(t,e){this.emit("choice",t,e,this);if(typeof t.onChoice==="function"){await t.onChoice.call(this,this.state,t,e)}}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);this.choices.push(s);this.index=this.choices.length-1;this.limit=this.choices.length;return s}async newItem(t,e,i){let s={name:"New choice name?",editable:true,newChoice:true,...t};let r=await this.addChoice(s,e,i);r.updateChoice=()=>{delete r.newChoice;r.name=r.message=r.input;r.input="";r.cursor=0};return this.render()}indent(t){if(t.indent==null){return t.level>1?"  ".repeat(t.level-1):""}return t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){if(typeof e!=="boolean")e=t.enabled;if(e&&!t.enabled&&this.selected.length>=this.maxSelected){return this.alert()}this.index=t.index;t.enabled=e&&!this.isDisabled(t);return t}space(){if(!this.multiple)return this.alert();if(!this.focused)return;this.toggle(this.focused);return this.render()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every(t=>t.enabled);this.choices.forEach(e=>e.enabled=!t);return this.render()}i(){if(this.choices.length-this.selected.length>this.maxSelected){return this.alert()}this.choices.forEach(t=>t.enabled=!t.enabled);return this.render()}g(){if(!this.choices.some(t=>!!t.parent))return this.a();const t=this.focused;this.toggle(t.parent&&!t.choices?t.parent:t);return this.render()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected){return this.alert()}if(typeof e!=="boolean")e=!t.enabled;t.enabled=e;if(t.choices){t.choices.forEach(t=>this.toggle(t,e))}let i=t.parent;while(i){let t=i.choices.filter(t=>this.isDisabled(t));i.enabled=t.every(t=>t.enabled===true);i=i.parent}u(this,this.choices);this.emit("toggle",t,this);return t}enable(t){if(this.selected.length>=this.maxSelected)return this.alert();t.enabled=!this.isDisabled(t);t.choices&&t.choices.forEach(this.enable.bind(this));return t}disable(t){t.enabled=false;t.choices&&t.choices.forEach(this.disable.bind(this));return t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused;let s=this.choices.find(t=>e===t.index);if(!s.enabled&&this.selected.length>=this.maxSelected){return this.alert()}if(this.visible.indexOf(s)===-1){let t=r(this.choices);let e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit);let s=t.filter(t=>!i.includes(t));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}this.index=this.choices.indexOf(s);this.toggle(this.focused);return this.render()};clearTimeout(this.numberTimeout);return new Promise(t=>{let i=this.choices.length;let s=this.num;let r=(i=false,r)=>{clearTimeout(this.numberTimeout);if(i)r=e(s);this.num="";t(r)};if(s==="0"||s.length===1&&Number(s+"0")>i){return r(true)}if(Number(s)>i){return r(false,this.alert())}this.numberTimeout=setTimeout(()=>r(true),this.delay)})}home(){this.choices=r(this.choices);this.index=0;return this.render()}end(){let t=this.choices.length-this.limit;let e=r(this.choices);this.choices=e.slice(t).concat(e.slice(0,t));this.index=this.limit-1;return this.render()}first(){this.index=0;return this.render()}last(){this.index=this.visible.length-1;return this.render()}prev(){if(this.visible.length<=1)return this.alert();return this.up()}next(){if(this.visible.length<=1)return this.alert();return this.down()}right(){if(this.cursor>=this.input.length)return this.alert();this.cursor++;return this.render()}left(){if(this.cursor<=0)return this.alert();this.cursor--;return this.render()}up(){let t=this.choices.length;let e=this.visible.length;let i=this.index;if(this.options.scroll===false&&i===0){return this.alert()}if(t>e&&i===0){return this.scrollUp()}this.index=(i-1%t+t)%t;if(this.isDisabled()&&!this.allChoicesAreDisabled()){return this.up()}return this.render()}down(){let t=this.choices.length;let e=this.visible.length;let i=this.index;if(this.options.scroll===false&&i===e-1){return this.alert()}if(t>e&&i===e-1){return this.scrollDown()}this.index=(i+1)%t;if(this.isDisabled()&&!this.allChoicesAreDisabled()){return this.down()}return this.render()}scrollUp(t=0){this.choices=n(this.choices);this.index=t;if(this.isDisabled()){return this.up()}return this.render()}scrollDown(t=this.visible.length-1){this.choices=a(this.choices);this.index=t;if(this.isDisabled()){return this.down()}return this.render()}async shiftUp(){if(this.options.sort===true){this.sorting=true;this.swap(this.index-1);await this.up();this.sorting=false;return}return this.scrollUp(this.index)}async shiftDown(){if(this.options.sort===true){this.sorting=true;this.swap(this.index+1);await this.down();this.sorting=false;return}return this.scrollDown(this.index)}pageUp(){if(this.visible.length<=1)return this.alert();this.limit=Math.max(this.limit-1,0);this.index=Math.min(this.limit-1,this.index);this._limit=this.limit;if(this.isDisabled()){return this.up()}return this.render()}pageDown(){if(this.visible.length>=this.choices.length)return this.alert();this.index=Math.max(0,this.index);this.limit=Math.min(this.limit+1,this.choices.length);this._limit=this.limit;if(this.isDisabled()){return this.down()}return this.render()}swap(t){o(this.choices,this.index,t)}allChoicesAreDisabled(t=this.choices){return t.every(t=>this.isDisabled(t))}isDisabled(t=this.focused){let e=["disabled","collapsed","hidden","completing","readonly"];if(t&&e.some(e=>t[e]===true)){return true}return t&&t.role==="heading"}isEnabled(t=this.focused){if(Array.isArray(t))return t.every(t=>this.isEnabled(t));if(t.choices){let e=t.choices.filter(t=>!this.isDisabled(t));return t.enabled&&e.every(t=>this.isEnabled(t))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){if(Array.isArray(this.initial)){return this.initial.some(e=>this.isChoice(t,e))}return this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce((t,i)=>{t[i]=this.find(i,e);return t},{})}filter(t,e){let i=(e,i)=>[e.name,i].includes(t);let s=typeof t==="function"?t:i;let r=this.options.multiple?this.state._choices:this.choices;let n=r.filter(s);if(e){return n.map(t=>t[e])}return n}find(t,e){if(l(t))return e?t[e]:t;let i=(e,i)=>[e.name,i].includes(t);let s=typeof t==="function"?t:i;let r=this.choices.find(s);if(r){return e?r[e]:r}}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice){if(!t.input)return this.alert();t.updateChoice();return this.render()}if(this.choices.some(t=>t.newChoice)){return this.alert()}let{reorder:e,sort:i}=this.options;let r=this.multiple===true;let n=this.selected;if(n===void 0){return this.alert()}if(Array.isArray(n)&&e!==false&&i!==true){n=s.reorder(n)}this.value=r?n.map(t=>t.name):n.name;return super.submit()}set choices(t=[]){this.state._choices=this.state._choices||[];this.state.choices=t;for(let e of t){if(!this.state._choices.some(t=>t.name===e.name)){this.state._choices.push(e)}}if(!this._initial&&this.options.initial){this._initial=true;let t=this.initial;if(typeof t==="string"||typeof t==="number"){let e=this.find(t);if(e){this.initial=e.index;this.focus(e,true)}}}}get choices(){return u(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this;let s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){if(typeof super.value!=="string"&&super.value===this.initial){return this.input}return super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];if(t&&this.state.submitted&&this.multiple!==true){t.enabled=true}return t}get selectable(){return this.choices.filter(t=>!this.isDisabled(t))}get selected(){return this.multiple?this.enabled:this.focused}}function u(t,e){if(e instanceof Promise)return e;if(typeof e==="function"){if(s.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter(e=>!t.isDisabled(e));i.enabled=e.every(t=>t.enabled===true)}if(t.isDisabled(i)===true){delete i.enabled}}return e}lt=h;return lt}var ut;var ct;function ft(){if(ct)return ut;ct=1;const t=ht();const e=v();class i extends t{constructor(t){super(t);this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple){return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e)}this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,i){let s=this.resolve(t.message,this.state,t,i);if(t.role==="heading"&&!e.hasColor(s)){s=this.styles.strong(s)}return this.resolve(s,this.state,t,i)}choiceSeparator(){return":"}async renderChoice(t,i){await this.onChoice(t,i);let s=this.index===i;let r=await this.pointer(t,i);let n=await this.indicator(t,i)+(t.pad||"");let a=await this.resolve(t.hint,this.state,t,i);if(a&&!e.hasColor(a)){a=this.styles.muted(a)}let l=this.indent(t);let o=await this.choiceMessage(t,i);let h=()=>[this.margin[3],l+r+n,o,this.margin[1],a].filter(Boolean).join(" ");if(t.role==="heading"){return h()}if(t.disabled){if(!e.hasColor(o)){o=this.styles.disabled(o)}return h()}if(s){o=this.styles.em(o)}return h()}async renderChoices(){if(this.state.loading==="choices"){return this.styles.warning("Loading choices")}if(this.state.submitted)return"";let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e));let e=await Promise.all(t);if(!e.length)e.push(this.styles.danger("No matching choices"));let i=this.margin[0]+e.join("\n");let s;if(this.options.choicesHeader){s=await this.resolve(this.options.choicesHeader,this.state)}return[s,i].filter(Boolean).join("\n")}format(){if(!this.state.submitted||this.state.cancelled)return"";if(Array.isArray(this.selected)){return this.selected.map(t=>this.styles.primary(t.name)).join(", ")}return this.styles.primary(this.selected.name)}async render(){let{submitted:t,size:e}=this.state;let i="";let s=await this.header();let r=await this.prefix();let n=await this.separator();let a=await this.message();if(this.options.promptLine!==false){i=[r,a,n,""].join(" ");this.state.prompt=i}let l=await this.format();let o=await this.error()||await this.hint();let h=await this.renderChoices();let u=await this.footer();if(l)i+=l;if(o&&!i.includes(o))i+=" "+o;if(t&&!l&&!h.trim()&&this.multiple&&this.emptyError!=null){i+=this.styles.danger(this.emptyError)}this.clear(e);this.write([s,i,h,u].filter(Boolean).join("\n"));this.write(this.margin[2]);this.restore()}}ut=i;return ut}var dt;var pt;function mt(){if(pt)return dt;pt=1;const t=ft();const e=(t,e)=>{const i=t?new RegExp(t,"ig"):/$^/;return s=>t?s.replace(i,t=>e(t)):s};class i extends t{constructor(t){super(t);this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=i.slice(0,e)+t+i.slice(e);this.moveCursor(1);return this.complete()}delete(){let{cursor:t,input:e}=this.state;if(!e)return this.alert();this.input=e.slice(0,t-1)+e.slice(t);this.moveCursor(-1);return this.complete()}deleteForward(){let{cursor:t,input:e}=this.state;if(e[t]===void 0)return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1);return this.complete()}number(t){return this.append(t)}async complete(){this.completing=true;this.choices=await this.suggest(this.input,this.state._choices);this.state.limit=void 0;this.index=Math.min(Math.max(this.visible.length-1,0),this.index);await this.render();this.completing=false}suggest(t=this.input,e=this.state._choices){if(typeof this.options.suggest==="function"){return this.options.suggest.call(this,t,e)}let i=t.toLowerCase();return e.filter(t=>t.message.toLowerCase().includes(i))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted){return this.selected.map(t=>this.styles.primary(t.message)).join(", ")}if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if(this.state.status!=="pending")return super.render();const t=this.options.highlight||this.styles.complement;const i=(e,i)=>{if(!e)return e;if(t.stack)return t(e);return t.call(this,e)};const s=e(this.input,i);const r=this.choices;this.choices=r.map(t=>({...t,message:s(t.message)}));await super.render();this.choices=r}submit(){if(this.options.multiple){this.value=this.selected.map(t=>t.name)}return super.submit()}}dt=i;return dt}var gt;var yt;function bt(){if(yt)return gt;yt=1;const t=v();gt=(e,i={})=>{e.cursorHide();let{input:s="",initial:r="",pos:n,showCursor:a=true,color:l}=i;let o=l||e.styles.placeholder;let h=t.inverse(e.styles.primary);let u=t=>h(e.styles.black(t));let c=s;let f=" ";let d=u(f);if(e.blink&&e.blink.off===true){u=t=>t;d=""}if(a&&n===0&&r===""&&s===""){return u(f)}if(a&&n===0&&(s===r||s==="")){return u(r[0])+o(r.slice(1))}r=t.isPrimitive(r)?`${r}`:"";s=t.isPrimitive(s)?`${s}`:"";let p=r&&r.startsWith(s)&&r!==s;let m=p?u(r[s.length]):d;if(n!==s.length&&a===true){c=s.slice(0,n)+u(s[n])+s.slice(n+1);m=""}if(a===false){m=""}if(p){let t=e.styles.unstyle(c+m);return c+m+o(r.slice(t.length))}return c+m};return gt}var wt;var vt;function xt(){if(vt)return wt;vt=1;const t=j();const e=ft();const i=bt();class s extends e{constructor(t){super({...t,multiple:true});this.type="form";this.initial=this.options.initial;this.align=[this.options.align,"right"].find(t=>t!=null);this.emptyError="";this.values={}}async reset(t){await super.reset();if(t===true)this._index=this.index;this.index=this._index;this.values={};this.choices.forEach(t=>t.reset&&t.reset());return this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let e=this.focused;if(!e)return this.alert();let{cursor:i,input:s}=e;e.value=e.input=s.slice(0,i)+t+s.slice(i);e.cursor++;return this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:e,input:i}=t;t.value=t.input=i.slice(0,e-1)+i.slice(e);t.cursor--;return this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:e,input:i}=t;if(i[e]===void 0)return this.alert();let s=`${i}`.slice(0,e)+`${i}`.slice(e+1);t.value=t.input=s;return this.render()}right(){let t=this.focused;if(!t)return this.alert();if(t.cursor>=t.input.length)return this.alert();t.cursor++;return this.render()}left(){let t=this.focused;if(!t)return this.alert();if(t.cursor<=0)return this.alert();t.cursor--;return this.render()}space(t,e){return this.dispatch(t,e)}number(t,e){return this.dispatch(t,e)}next(){let t=this.focused;if(!t)return this.alert();let{initial:e,input:i}=t;if(e&&e.startsWith(i)&&i!==e){t.value=t.input=e;t.cursor=t.value.length;return this.render()}return super.next()}prev(){let t=this.focused;if(!t)return this.alert();if(t.cursor===0)return super.prev();t.value=t.input="";t.cursor=0;return this.render()}separator(){return""}format(t){return!this.state.submitted?super.format(t):""}pointer(){return""}indicator(t){return t.input?"â¦¿":"âŠ™"}async choiceSeparator(t,e){let i=await this.resolve(t.separator,this.state,t,e)||":";return" "+this.styles.disabled(i)}async renderChoice(e,s){await this.onChoice(e,s);let{state:r,styles:n}=this;let{cursor:a,initial:l="",name:o,input:h=""}=e;let{muted:u,submitted:c,primary:f,danger:d}=n;let p=this.index===s;let m=e.validate||(()=>true);let g=await this.choiceSeparator(e,s);let y=e.message;if(this.align==="right")y=y.padStart(this.longest+1," ");if(this.align==="left")y=y.padEnd(this.longest+1," ");let b=this.values[o]=h||l;let w=h?"success":"dark";if(await m.call(e,b,this.state)!==true){w="danger"}let v=n[w];let x=v(await this.indicator(e,s))+(e.pad||"");let k=this.indent(e);let C=()=>[k,x,y+g,h].filter(Boolean).join(" ");if(r.submitted){y=t(y);h=c(h);return C()}if(e.format){h=await e.format.call(this,h,e,s)}else{let t=this.styles.muted;let e={input:h,initial:l,pos:a,showCursor:p,color:t};h=i(this,e)}if(!this.isValue(h)){h=this.styles.muted(this.symbols.ellipsis)}if(e.result){this.values[o]=await e.result.call(this,b,e,s)}if(p){y=f(y)}if(e.error){h+=(h?" ":"")+d(e.error.trim())}else if(e.hint){h+=(h?" ":"")+u(e.hint.trim())}return C()}async submit(){this.value=this.values;return super.base.submit.call(this)}}wt=s;return wt}var kt;var Ct;function St(){if(Ct)return kt;Ct=1;const t=xt();const e=()=>{throw new Error("expected prompt to have a custom authenticate method")};const i=(s=e)=>{class r extends t{constructor(t){super(t)}async submit(){this.value=await s.call(this,this.values,this.state);super.base.submit.call(this)}static create(t){return i(t)}}return r};kt=i();return kt}var $t;var jt;function _t(){if(jt)return $t;jt=1;const t=St();function e(t,e){if(t.username===this.options.username&&t.password===this.options.password){return true}return false}const i=(s=e)=>{const r=[{name:"username",message:"username"},{name:"password",message:"password",format(t){if(this.options.showPassword){return t}let e=this.state.submitted?this.styles.primary:this.styles.muted;return e(this.symbols.asterisk.repeat(t.length))}}];class n extends(t.create(s)){constructor(t){super({...t,choices:r})}static create(t){return i(t)}}return n};$t=i();return $t}var Pt;var Ot;function Et(){if(Ot)return Pt;Ot=1;const t=it();const{isPrimitive:e,hasColor:i}=v();class s extends t{constructor(t){super(t);this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t);await super.initialize()}dispatch(t){if(!this.isValue(t))return this.alert();this.input=t;return this.submit()}format(t){let{styles:e,state:i}=this;return!i.submitted?e.primary(t):e.success(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return e(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if(this.state.status==="pending"){let t=await this.element("hint");if(!i(t)){return this.styles.muted(t)}return t}}async render(){let{input:t,size:e}=this.state;let i=await this.prefix();let s=await this.separator();let r=await this.message();let n=this.styles.muted(this.default);let a=[i,r,n,s].filter(Boolean).join(" ");this.state.prompt=a;let l=await this.header();let o=this.value=this.cast(t);let h=await this.format(o);let u=await this.error()||await this.hint();let c=await this.footer();if(u&&!a.includes(u))h+=" "+u;a+=" "+h;this.clear(e);this.write([l,a,c].filter(Boolean).join("\n"));this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}}Pt=s;return Pt}var Bt;var Rt;function At(){if(Rt)return Bt;Rt=1;const t=Et();class e extends t{constructor(t){super(t);this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}}Bt=e;return Bt}var Dt;var It;function zt(){if(It)return Dt;It=1;const t=ft();const e=xt();const i=e.prototype;class s extends t{constructor(t){super({...t,multiple:true});this.align=[this.options.align,"left"].find(t=>t!=null);this.emptyError="";this.values={}}dispatch(t,e){let s=this.focused;let r=s.parent||{};if(!s.editable&&!r.editable){if(t==="a"||t==="i")return super[t]()}return i.dispatch.call(this,t,e)}append(t,e){return i.append.call(this,t,e)}delete(t,e){return i.delete.call(this,t,e)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?i.next.call(this):super.next()}prev(){return this.focused.editable?i.prev.call(this):super.prev()}async indicator(t,e){let i=t.indicator||"";let s=t.editable?i:super.indicator(t,e);return await this.resolve(s,this.state,t,e)||""}indent(t){return t.role==="heading"?"":t.editable?" ":"  "}async renderChoice(t,e){t.indent="";if(t.editable)return i.renderChoice.call(this,t,e);return super.renderChoice(t,e)}error(){return""}footer(){return this.state.error}async validate(){let t=true;for(let e of this.choices){if(typeof e.validate!=="function"){continue}if(e.role==="heading"){continue}let i=e.parent?this.value[e.parent.name]:this.value;if(e.editable){i=e.value===e.name?e.initial||"":e.value}else if(!this.isDisabled(e)){i=e.enabled===true}t=await e.validate(i,this.state);if(t!==true){break}}if(t!==true){this.state.error=typeof t==="string"?t:"Invalid Input"}return t}submit(){if(this.focused.newChoice===true)return super.submit();if(this.choices.some(t=>t.newChoice)){return this.alert()}this.value={};for(let t of this.choices){let e=t.parent?this.value[t.parent.name]:this.value;if(t.role==="heading"){this.value[t.name]={};continue}if(t.editable){e[t.name]=t.value===t.name?t.initial||"":t.value}else if(!this.isDisabled(t)){e[t.name]=t.enabled===true}}return this.base.submit.call(this)}}Dt=s;return Dt}var Mt;var Lt;function Tt(){if(Lt)return Mt;Lt=1;const t=it();const e=I();const i=bt();const{isPrimitive:s}=v();class r extends t{constructor(t){super(t);this.initial=s(this.initial)?String(this.initial):"";if(this.initial)this.cursorHide();this.state.prevCursor=0;this.state.clipboard=[];this.keypressTimeout=this.options.keypressTimeout!==undefined?this.options.keypressTimeout:null}async keypress(t,i=(t?e(t,{}):{})){const s=Date.now();const r=s-this.lastKeypress;this.lastKeypress=s;const n=i.name==="return"||i.name==="enter";let a=this.state.prevKeypress;let l;this.state.prevKeypress=i;if(this.keypressTimeout!=null&&n){if(r<this.keypressTimeout){return this.submit()}this.state.multilineBuffer=this.state.multilineBuffer||"";this.state.multilineBuffer+=t;l=true;a=null}if(l||this.options.multiline&&n){if(!a||a.name!=="return"){return this.append("\n",i)}}return super.keypress(t,i)}moveCursor(t){this.cursor+=t}reset(){this.input=this.value="";this.cursor=0;return this.render()}dispatch(t,e){if(!t||e.ctrl||e.code)return this.alert();this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=`${i}`.slice(0,e)+t+`${i}`.slice(e);this.moveCursor(String(t).length);this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:e}=this.state;if(t<=0)return this.alert();this.input=`${e}`.slice(0,t-1)+`${e}`.slice(t);this.moveCursor(-1);this.render()}deleteForward(){let{cursor:t,input:e}=this.state;if(e[t]===void 0)return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1);this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t));this.input=this.input.slice(0,t);this.render()}cutLeft(){let t=this.cursor;if(t===0)return this.alert();let e=this.input.slice(0,t);let i=this.input.slice(t);let s=e.split(" ");this.state.clipboard.push(s.pop());this.input=s.join(" ");this.cursor=this.input.length;this.input+=i;this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop());this.render()}toggleCursor(){if(this.state.prevCursor){this.cursor=this.state.prevCursor;this.state.prevCursor=0}else{this.state.prevCursor=this.cursor;this.cursor=0}this.render()}first(){this.cursor=0;this.render()}last(){this.cursor=this.input.length-1;this.render()}next(){let t=this.initial!=null?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial;this.cursor=this.initial.length;this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1);return this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1);return this.render()}isValue(t){return!!t}async format(t=this.value){let e=await this.resolve(this.initial,this.state);if(!this.state.submitted){return i(this,{input:t,initial:e,pos:this.cursor})}return this.styles.submitted(t||e)}async render(){let t=this.state.size;let e=await this.prefix();let i=await this.separator();let s=await this.message();let r=[e,s,i].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header();let a=await this.format();let l=await this.error()||await this.hint();let o=await this.footer();if(l&&!a.includes(l))a+=" "+l;r+=" "+a;this.clear(t);this.write([n,r,o].filter(Boolean).join("\n"));this.restore()}}Mt=r;return Mt}var qt;var Nt;function Ft(){if(Nt)return qt;Nt=1;const t=t=>t.filter((e,i)=>t.lastIndexOf(e)===i);const e=e=>t(e).filter(Boolean);qt=(t,i={},s="")=>{let{past:r=[],present:n=""}=i;let a,l;switch(t){case"prev":case"undo":a=r.slice(0,r.length-1);l=r[r.length-1]||"";return{past:e([s,...a]),present:l};case"next":case"redo":a=r.slice(1);l=r[0]||"";return{past:e([...a,s]),present:l};case"save":return{past:e([...r,s]),present:""};case"remove":l=e(r.filter(t=>t!==s));n="";if(l.length){n=l.pop()}return{past:l,present:n};default:{throw new Error(`Invalid action: "${t}"`)}}};return qt}var Ht;var Vt;function Ut(){if(Vt)return Ht;Vt=1;const t=Tt();const e=Ft();class i extends t{constructor(t){super(t);let e=this.options.history;if(e&&e.store){let t=e.values||this.initial;this.autosave=!!e.autosave;this.store=e.store;this.data=this.store.get("values")||{past:[],present:t};this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){if(!this.store)return this.alert();this.data=e(t,this.data,this.input);if(!this.data.present)return this.alert();this.input=this.data.present;this.cursor=this.input.length;return this.render()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){this.save();return super.prev()}save(){if(!this.store)return;this.data=e("save",this.data,this.input);this.store.set("values",this.data)}submit(){if(this.store&&this.autosave===true){this.save()}return super.submit()}}Ht=i;return Ht}var Wt;var Gt;function Kt(){if(Gt)return Wt;Gt=1;const t=Tt();class e extends t{format(){return""}}Wt=e;return Wt}var Zt;var Yt;function Jt(){if(Yt)return Zt;Yt=1;const t=Tt();class e extends t{constructor(t={}){super(t);this.sep=this.options.separator||/, */;this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:t=>t;return this.list.map(t).join(", ")}async submit(t){let e=this.state.error||await this.validate(this.list,this.state);if(e!==true){this.state.error=e;return super.submit()}this.value=this.list;return super.submit()}get list(){return this.split()}}Zt=e;return Zt}var Qt;var Xt;function te(){if(Xt)return Qt;Xt=1;const t=ft();class e extends t{constructor(t){super({...t,multiple:true})}}Qt=e;return Qt}var ee;var ie;function se(){if(ie)return ee;ie=1;const t=Tt();class e extends t{constructor(t={}){super({style:"number",...t});this.min=this.isValue(t.min)?this.toNumber(t.min):-Infinity;this.max=this.isValue(t.max)?this.toNumber(t.max):Infinity;this.delay=t.delay!=null?t.delay:1e3;this.float=t.float!==false;this.round=t.round===true||t.float===false;this.major=t.major||10;this.minor=t.minor||1;this.initial=t.initial!=null?t.initial:"";this.input=String(this.initial);this.cursor=this.input.length;this.cursorShow()}append(t){if(!/[-+.]/.test(t)||t==="."&&this.input.includes(".")){return this.alert("invalid number")}return super.append(t)}number(t){return super.append(t)}next(){if(this.input&&this.input!==this.initial)return this.alert();if(!this.isValue(this.initial))return this.alert();this.input=this.initial;this.cursor=String(this.initial).length;return this.render()}up(t){let e=t||this.minor;let i=this.toNumber(this.input);if(i>this.max+e)return this.alert();this.input=`${i+e}`;return this.render()}down(t){let e=t||this.minor;let i=this.toNumber(this.input);if(i<this.min-e)return this.alert();this.input=`${i-e}`;return this.render()}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){if(typeof this.options.format==="function"){return this.options.format.call(this,t)}return this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find(t=>this.isValue(t));this.value=this.toNumber(t||0);return super.submit()}}ee=e;return ee}var re;var ne;function ae(){if(ne)return re;ne=1;re=se();return re}var le;var oe;function he(){if(oe)return le;oe=1;const t=Tt();class e extends t{constructor(t){super(t);this.cursorShow()}format(t=this.input){if(!this.keypressed)return"";let e=this.state.submitted?this.styles.primary:this.styles.muted;return e(this.symbols.asterisk.repeat(t.length))}}le=e;return le}var ue;var ce;function fe(){if(ce)return ue;ce=1;const t=j();const e=ht();const i=v();class s extends e{constructor(t={}){super(t);this.widths=[].concat(t.messageWidth||50);this.align=[].concat(t.align||"left");this.linebreak=t.linebreak||false;this.edgeLength=t.edgeLength||3;this.newline=t.newline||"\n   ";let e=t.startNumber||1;if(typeof this.scale==="number"){this.scaleKey=false;this.scale=Array(this.scale).fill(0).map((t,i)=>({name:i+e}))}}async reset(){this.tableized=false;await super.reset();return this.render()}tableize(){if(this.tableized===true)return;this.tableized=true;let t=0;for(let e of this.choices){t=Math.max(t,e.message.length);e.scaleIndex=e.initial||2;e.scale=[];for(let t=0;t<this.scale.length;t++){e.scale.push({index:t})}}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,e){if(this.multiple){return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e)}this.alert()}heading(t,e,i){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;if(t.scaleIndex>=this.scale.length-1)return this.alert();t.scaleIndex++;return this.render()}left(){let t=this.focused;if(t.scaleIndex<=0)return this.alert();t.scaleIndex--;return this.render()}indent(){return""}format(){if(this.state.submitted){let t=this.choices.map(t=>this.styles.info(t.index));return t.join(", ")}return""}pointer(){return""}renderScaleKey(){if(this.scaleKey===false)return"";if(this.state.submitted)return"";let t=this.scale.map(t=>`   ${t.name} - ${t.message}`);let e=["",...t].map(t=>this.styles.muted(t));return e.join("\n")}renderScaleHeading(t){let e=this.scale.map(t=>t.name);if(typeof this.options.renderScaleHeading==="function"){e=this.options.renderScaleHeading.call(this,t)}let i=this.scaleLength-e.join("").length;let s=Math.round(i/(e.length-1));let r=e.map(t=>this.styles.strong(t));let n=r.join(" ".repeat(s));let a=" ".repeat(this.widths[0]);return this.margin[3]+a+this.margin[1]+n}scaleIndicator(t,e,i){if(typeof this.options.scaleIndicator==="function"){return this.options.scaleIndicator.call(this,t,e,i)}let s=t.scaleIndex===e.index;if(e.disabled)return this.styles.hint(this.symbols.radio.disabled);if(s)return this.styles.success(this.symbols.radio.on);return this.symbols.radio.off}renderScale(t,e){let i=t.scale.map(i=>this.scaleIndicator(t,i,e));let s=this.term==="Hyper"?"":" ";return i.join(s+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,s){await this.onChoice(e,s);let r=this.index===s;let n=await this.pointer(e,s);let a=await e.hint;if(a&&!i.hasColor(a)){a=this.styles.muted(a)}let l=t=>this.margin[3]+t.replace(/\s+$/,"").padEnd(this.widths[0]," ");let o=this.newline;let h=this.indent(e);let u=await this.resolve(e.message,this.state,e,s);let c=await this.renderScale(e,s);let f=this.margin[1]+this.margin[3];this.scaleLength=t(c).length;this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-f.length);let d=i.wordWrap(u,{width:this.widths[0],newline:o});let p=d.split("\n").map(t=>l(t)+this.margin[1]);if(r){c=this.styles.info(c);p=p.map(t=>this.styles.info(t))}p[0]+=c;if(this.linebreak)p.push("");return[h+n,p.join("\n")].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e));let e=await Promise.all(t);let i=await this.renderScaleHeading();return this.margin[0]+[i,...e.map(t=>t.join(" "))].join("\n")}async render(){let{submitted:t,size:e}=this.state;let i=await this.prefix();let s=await this.separator();let r=await this.message();let n="";if(this.options.promptLine!==false){n=[i,r,s,""].join(" ");this.state.prompt=n}let a=await this.header();let l=await this.format();let o=await this.renderScaleKey();let h=await this.error()||await this.hint();let u=await this.renderChoices();let c=await this.footer();let f=this.emptyError;if(l)n+=l;if(h&&!n.includes(h))n+=" "+h;if(t&&!l&&!u.trim()&&this.multiple&&f!=null){n+=this.styles.danger(f)}this.clear(e);this.write([a,n,o,u,c].filter(Boolean).join("\n"));if(!this.state.submitted){this.write(this.margin[2])}this.restore()}submit(){this.value={};for(let t of this.choices){this.value[t.name]=t.scaleIndex}return this.base.submit.call(this)}}ue=s;return ue}var de;var pe;function me(){if(pe)return de;pe=1;const t=j();const e=(t="")=>typeof t==="string"?t.replace(/^['"]|['"]$/g,""):"";class i{constructor(t){this.name=t.key;this.field=t.field||{};this.value=e(t.initial||this.field.initial||"");this.message=t.message||this.name;this.cursor=0;this.input="";this.lines=[]}}const s=async(t={},e={},s=t=>t)=>{let r=new Set;let n=t.fields||[];let a=t.template;let l=[];let o=[];let h=[];let u=1;if(typeof a==="function"){a=await a()}let c=-1;let f=()=>a[++c];let d=()=>a[c+1];let p=t=>{t.line=u;l.push(t)};p({type:"bos",value:""});while(c<a.length-1){let t=f();if(/^[^\S\n ]$/.test(t)){p({type:"text",value:t});continue}if(t==="\n"){p({type:"newline",value:t});u++;continue}if(t==="\\"){t+=f();p({type:"text",value:t});continue}if((t==="$"||t==="#"||t==="{")&&d()==="{"){let a=f();t+=a;let l={type:"template",open:t,inner:"",close:"",value:t};let u;while(u=f()){if(u==="}"){if(d()==="}")u+=f();l.value+=u;l.close=u;break}if(u===":"){l.initial="";l.key=l.inner}else if(l.initial!==void 0){l.initial+=u}l.value+=u;l.inner+=u}l.template=l.open+(l.initial||l.inner)+l.close;l.key=l.key||l.inner;if(hasOwnProperty.call(e,l.key)){l.initial=e[l.key]}l=s(l);p(l);h.push(l.key);r.add(l.key);let c=o.find(t=>t.name===l.key);l.field=n.find(t=>t.name===l.key);if(!c){c=new i(l);o.push(c)}c.lines.push(l.line-1);continue}let a=l[l.length-1];if(a.type==="text"&&a.line===u){a.value+=t}else{p({type:"text",value:t})}}p({type:"eos",value:""});return{input:a,tabstops:l,unique:r,keys:h,items:o}};de=async e=>{let i=e.options;let n=new Set(i.required===true?[]:i.required||[]);let a={...i.values,...i.initial};let{tabstops:l,items:o,keys:h}=await s(i,a);let u=r("result",e);let c=r("format",e);let f=r("validate",e,i,true);let d=e.isValue.bind(e);return async(s={},r=false)=>{let a=0;s.required=n;s.items=o;s.keys=h;s.output="";let p=async(t,e,i,s)=>{let r=await f(t,e,i,s);if(r===false){return"Invalid field "+i.name}return r};for(let n of l){let l=n.value;let h=n.key;if(n.type!=="template"){if(l)s.output+=l;continue}if(n.type==="template"){let f=o.find(t=>t.name===h);if(i.required===true){s.required.add(f.name)}let m=[f.input,s.values[f.value],f.value,l].find(d);let g=f.field||{};let y=g.message||n.inner;if(r){let e=await p(s.values[h],s,f,a);if(e&&typeof e==="string"||e===false){s.invalid.set(h,e);continue}s.invalid.delete(h);let i=await u(s.values[h],s,f,a);s.output+=t(i);continue}f.placeholder=false;let b=l;l=await c(l,s,f,a);if(m!==l){s.values[h]=m;l=e.styles.typing(m);s.missing.delete(y)}else{s.values[h]=void 0;m=`<${y}>`;l=e.styles.primary(m);f.placeholder=true;if(s.required.has(h)){s.missing.add(y)}}if(s.missing.has(y)&&s.validating){l=e.styles.warning(m)}if(s.invalid.has(h)&&s.validating){l=e.styles.danger(m)}if(a===s.index){if(b!==l){l=e.styles.underline(l)}else{l=e.styles.heading(t(l))}}a++}if(l){s.output+=l}}let m=s.output.split("\n").map(t=>" "+t);let g=o.length;let y=0;for(let t of o){if(s.invalid.has(t.name)){t.lines.forEach(t=>{if(m[t][0]!==" ")return;m[t]=s.styles.danger(s.symbols.bullet)+m[t].slice(1)})}if(e.isValue(s.values[t.name])){y++}}s.completed=(y/g*100).toFixed(0);s.output=m.join("\n");return s.output}};function r(t,e,i,s){return(i,r,n,a)=>{if(typeof n.field[t]==="function"){return n.field[t].call(e,i,r,n,a)}return[s,i].find(t=>e.isValue(t))}}return de}var ge;var ye;function be(){if(ye)return ge;ye=1;const t=j();const e=me();const i=it();class s extends i{constructor(t){super(t);this.cursorHide();this.reset(true)}async initialize(){this.interpolate=await e(this);await super.initialize()}async reset(t){this.state.keys=[];this.state.invalid=new Map;this.state.missing=new Set;this.state.completed=0;this.state.values={};if(t!==true){await this.initialize();await this.render()}}moveCursor(t){let e=this.getItem();this.cursor+=t;e.cursor+=t}dispatch(t,e){if(!e.code&&!e.ctrl&&t!=null&&this.getItem()){this.append(t,e);return}this.alert()}append(t,e){let i=this.getItem();let s=i.input.slice(0,this.cursor);let r=i.input.slice(this.cursor);this.input=i.input=`${s}${t}${r}`;this.moveCursor(1);this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let e=t.input.slice(this.cursor);let i=t.input.slice(0,this.cursor-1);this.input=t.input=`${i}${e}`;this.moveCursor(-1);this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0;this.render()}last(){this.state.index=this.state.keys.length-1;this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1);this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1);this.render()}prev(){this.state.index=this.decrement(this.state.index);this.getItem();this.render()}next(){this.state.index=this.increment(this.state.index);this.getItem();this.render()}up(){this.prev()}down(){this.next()}format(t){let e=this.state.completed<100?this.styles.warning:this.styles.success;if(this.state.submitted===true&&this.state.completed!==100){e=this.styles.danger}return e(`${this.state.completed}% completed`)}async render(){let{index:t,keys:e=[],submitted:i,size:s}=this.state;let r=[this.options.newline,"\n"].find(t=>t!=null);let n=await this.prefix();let a=await this.separator();let l=await this.message();let o=[n,l,a].filter(Boolean).join(" ");this.state.prompt=o;let h=await this.header();let u=await this.error()||"";let c=await this.hint()||"";let f=i?"":await this.interpolate(this.state);let d=this.state.key=e[t]||"";let p=await this.format(d);let m=await this.footer();if(p)o+=" "+p;if(c&&!p&&this.state.completed===0)o+=" "+c;this.clear(s);let g=[h,o,f,m,u.trim()];this.write(g.filter(Boolean).join(r));this.restore()}getItem(t){let{items:e,keys:i,index:s}=this.state;let r=e.find(t=>t.name===i[s]);if(r&&r.input!=null){this.input=r.input;this.cursor=r.cursor}return r}async submit(){if(typeof this.interpolate!=="function")await this.initialize();await this.interpolate(this.state,true);let{invalid:e,missing:i,output:s,values:r}=this.state;if(e.size){let t="";for(let[i,s]of e)t+=`Invalid ${i}: ${s}\n`;this.state.error=t;return super.submit()}if(i.size){this.state.error="Required: "+[...i.keys()].join(", ");return super.submit()}let n=t(s).split("\n");let a=n.map(t=>t.slice(1)).join("\n");this.value={values:r,result:a};return super.submit()}}ge=s;return ge}var we;var ve;function xe(){if(ve)return we;ve=1;const t="(Use <shift>+<up/down> to sort)";const e=ft();class i extends e{constructor(e){super({...e,reorder:false,sort:true,multiple:true});this.state.hint=[this.options.hint,t].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,e){let i=await super.renderChoice(t,e);let s=this.symbols.identicalTo+" ";let r=this.index===e&&this.sorting?this.styles.muted(s):"  ";if(this.options.drag===false)r="";if(this.options.numbered===true){return r+`${e+1} - `+i}return r+i}get selected(){return this.choices}submit(){this.value=this.choices.map(t=>t.value);return super.submit()}}we=i;return we}var ke;var Ce;function Se(){if(Ce)return ke;Ce=1;const t=ht();class e extends t{constructor(t={}){super(t);this.emptyError=t.emptyError||"No items were selected";this.term=process.env.TERM_PROGRAM;if(!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map(t=>this.styles.muted(t));this.state.header=t.join("\n   ")}}async toChoices(...t){if(this.createdScales)return false;this.createdScales=true;let e=await super.toChoices(...t);for(let t of e){t.scale=i(5,this.options);t.scaleIdx=2}return e}dispatch(){this.alert()}space(){let t=this.focused;let e=t.scale[t.scaleIdx];let i=e.selected;t.scale.forEach(t=>t.selected=false);e.selected=!i;return this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;if(t.scaleIdx>=t.scale.length-1)return this.alert();t.scaleIdx++;return this.render()}left(){let t=this.focused;if(t.scaleIdx<=0)return this.alert();t.scaleIdx--;return this.render()}indent(){return"   "}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e;let s=this.term==="Hyper";let r=!s?8:9;let n=!s?" ":"";let a=this.symbols.line.repeat(r);let l=" ".repeat(r+(s?0:1));let o=t=>(t?this.styles.success("â—‰"):"â—¯")+n;let h=e+1+".";let u=i?this.styles.heading:this.styles.noop;let c=await this.resolve(t.message,this.state,t,e);let f=this.indent(t);let d=f+t.scale.map((e,i)=>o(i===t.scaleIdx)).join(a);let p=e=>e===t.scaleIdx?u(e):e;let m=f+t.scale.map((t,e)=>p(e)).join(l);let g=()=>[h,c].filter(Boolean).join(" ");let y=()=>[g(),d,m," "].filter(Boolean).join("\n");if(i){d=this.styles.cyan(d);m=this.styles.cyan(m)}return y()}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e));let e=await Promise.all(t);if(!e.length)e.push(this.styles.danger("No matching choices"));return e.join("\n")}format(){if(this.state.submitted){let t=this.choices.map(t=>this.styles.info(t.scaleIdx));return t.join(", ")}return""}async render(){let{submitted:t,size:e}=this.state;let i=await this.prefix();let s=await this.separator();let r=await this.message();let n=[i,r,s].filter(Boolean).join(" ");this.state.prompt=n;let a=await this.header();let l=await this.format();let o=await this.error()||await this.hint();let h=await this.renderChoices();let u=await this.footer();if(l||!o)n+=" "+l;if(o&&!n.includes(o))n+=" "+o;if(t&&!l&&!h&&this.multiple&&this.type!=="form"){n+=this.styles.danger(this.emptyError)}this.clear(e);this.write([n,a,h,u].filter(Boolean).join("\n"));this.restore()}submit(){this.value={};for(let t of this.choices){this.value[t.name]=t.scaleIdx}return this.base.submit.call(this)}}function i(t,e={}){if(Array.isArray(e.scale)){return e.scale.map(t=>({...t}))}let i=[];for(let e=1;e<t+1;e++)i.push({i:e,selected:false});return i}ke=e;return ke}var $e;var je;function _e(){if(je)return $e;je=1;$e=Ut();return $e}var Pe;var Oe;function Ee(){if(Oe)return Pe;Oe=1;const t=Et();class e extends t{async initialize(){await super.initialize();this.value=this.initial=this.resolve(this.options.initial);this.disabled=this.options.disabled||"no";this.enabled=this.options.enabled||"yes";await this.render()}reset(){this.value=this.initial;this.render()}delete(){this.alert()}toggle(){this.value=!this.value;this.render()}enable(){if(this.value===true)return this.alert();this.value=true;this.render()}disable(){if(this.value===false)return this.alert();this.value=false;this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",e){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:{return this.alert()}}}format(){let t=t=>this.styles.primary.underline(t);let e=[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled];return e.join(this.styles.muted(" / "))}async render(){let{size:t}=this.state;let e=await this.header();let i=await this.prefix();let s=await this.separator();let r=await this.message();let n=await this.format();let a=await this.error()||await this.hint();let l=await this.footer();let o=[i,r,s,n].join(" ");this.state.prompt=o;if(a&&!o.includes(a))o+=" "+a;this.clear(t);this.write([e,o,l].filter(Boolean).join("\n"));this.write(this.margin[2]);this.restore()}}Pe=e;return Pe}var Be;var Re;function Ae(){if(Re)return Be;Re=1;const t=ft();class e extends t{constructor(t){super(t);if(typeof this.options.correctChoice!=="number"||this.options.correctChoice<0){throw new Error("Please specify the index of the correct answer from the list of choices")}}async toChoices(t,e){let i=await super.toChoices(t,e);if(i.length<2){throw new Error("Please give at least two choices to the user")}if(this.options.correctChoice>i.length){throw new Error("Please specify the index of the correct answer from the list of choices")}return i}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}}Be=e;return Be}var De;function Ie(){if(De)return st;De=1;(function(t){const e=v();const i=(i,s)=>{e.defineExport(t,i,s);e.defineExport(t,i.toLowerCase(),s)};i("AutoComplete",()=>mt());i("BasicAuth",()=>_t());i("Confirm",()=>At());i("Editable",()=>zt());i("Form",()=>xt());i("Input",()=>Ut());i("Invisible",()=>Kt());i("List",()=>Jt());i("MultiSelect",()=>te());i("Numeral",()=>ae());i("Password",()=>he());i("Scale",()=>fe());i("Select",()=>ft());i("Snippet",()=>be());i("Sort",()=>xe());i("Survey",()=>Se());i("Text",()=>_e());i("Toggle",()=>Ee());i("Quiz",()=>Ae())})(st);return st}var ze;var Me;function Le(){if(Me)return ze;Me=1;ze={ArrayPrompt:ht(),AuthPrompt:St(),BooleanPrompt:Et(),NumberPrompt:se(),StringPrompt:Tt()};return ze}var Te;var qe;function Ne(){if(qe)return Te;qe=1;const i=t;const s=e;const r=v();class n extends s{constructor(t,e){super();this.options=r.merge({},t);this.answers={...e}}register(t,e){if(r.isObject(t)){for(let e of Object.keys(t))this.register(e,t[e]);return this}i.equal(typeof e,"function","expected a function");const s=t.toLowerCase();if(e.prototype instanceof this.Prompt){this.prompts[s]=e}else{this.prompts[s]=e(this.Prompt,this)}return this}async prompt(t=[]){for(let e of[].concat(t)){try{if(typeof e==="function")e=await e.call(this);await this.ask(r.merge({},this.options,e))}catch(t){return Promise.reject(t)}}return this.answers}async ask(t){if(typeof t==="function"){t=await t.call(this)}let e=r.merge({},this.options,t);let{type:s,name:n}=t;let{set:a,get:l}=r;if(typeof s==="function"){s=await s.call(this,t,this.answers)}if(!s)return this.answers[n];if(s==="number")s="numeral";i(this.prompts[s],`Prompt "${s}" is not registered`);let o=new this.prompts[s](e);let h=l(this.answers,n);o.state.answers=this.answers;o.enquirer=this;if(n){o.on("submit",t=>{this.emit("answer",n,t,o);a(this.answers,n,t)})}let u=o.emit.bind(o);o.emit=(...t)=>{this.emit.call(this,...t);return u(...t)};this.emit("prompt",o,this);if(e.autofill&&h!=null){o.value=o.input=h;if(e.autofill==="show"){await o.submit()}}else{h=o.value=await o.run()}return h}use(t){t.call(this,this);return this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||it()}static get prompts(){return Ie()}static get types(){return Le()}static get prompt(){const t=(e,...i)=>{let s=new this(...i);let r=s.emit.bind(s);s.emit=(...e)=>{t.emit(...e);return r(...e)};return s.prompt(e)};r.mixinEmitter(t,new s);return t}}r.mixinEmitter(n,new s);const a=n.prompts;for(let t of Object.keys(a)){let e=t.toLowerCase();let i=e=>new a[t](e).run();n.prompt[e]=i;n[e]=i;if(!n[t]){Reflect.defineProperty(n,t,{get:()=>a[t]})}}const l=t=>{r.defineExport(n,t,()=>n.types[t])};l("ArrayPrompt");l("AuthPrompt");l("BooleanPrompt");l("NumberPrompt");l("StringPrompt");Te=n;return Te}var Fe=Ne();var He=s(Fe);var Ve=Object.freeze({__proto__:null,default:He});const{default:Ue}=await Promise.resolve().then(function(){return Ve});const We=new Ue;async function Ge(t){const e=await We.prompt(function(){let e=[];t.forEach(function(t){let i={type:"input",name:t.key,message:t.question};e.push(i)});return e}());console.log(e)}const Ke={ask:Ge};export{c as args,Ke as input};
